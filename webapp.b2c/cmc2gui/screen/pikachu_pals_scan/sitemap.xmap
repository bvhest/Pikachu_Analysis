<?xml version="1.0"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
  <!-- =========================== Components ================================ -->
  <map:components>
	</map:components>
  <!-- =========================== Resources =============================== -->
  <map:resources>
	</map:resources>
  <!-- =========================== Pipelines ================================= -->
  <map:pipelines>
    <!-- use case pipeline - URI request handling -->
    <map:pipeline>
      <!-- -->
      <map:match pattern="pikachu_pals_scan.xml">
        <map:generate type="request" label="step1"/>
        <map:transform type="xslt-saxon" src="include.xslt" label="step2"/>
        <map:transform type="include" label="step3"/>
        <map:serialize type="xml"/>
      </map:match>
	  <!-- -->
      <map:match pattern="pikachupalsscan!*!**!*.xml">
        <map:generate type="xpathdirectory" src="/applusr/pals/files/{1}/archive/pikachu-to-sdl-london" label="step4">
          <map:parameter name="dateFormat" value="yyyy-MM-dd HH:mm"/>
          <map:parameter name="depth" value="1"/>
          <map:parameter name="sort" value="lastmodified"/>
          <map:parameter name="reverse" value="true"/>
          <map:parameter name="xpath" value="/Products/Product[CTN = '{2}']"/>
		  <map:parameter name="include" value=".*\.{3}\..*\.*"/>
          <map:parameter name="xmlFiles" value="\.xml$"/>
        </map:generate>
        <map:transform type="xslt-saxon" src="show.xslt" label="step5">
          <map:parameter name="id" value="{2}"/>
          <map:parameter name="locale" value="{3}"/>
          <map:parameter name="directory" value="{1}"/>
          <map:parameter name="gui_url" value="{global:gui_url}"/>
		</map:transform>
        <map:serialize type="xml"/>
      </map:match>
      <!-- -->
    </map:pipeline>
  </map:pipelines>
	<!-- -->
	<map:views>
		<map:view name="step1" from-label="step1">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step2" from-label="step2">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step2a" from-label="step2a">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step3" from-label="step3">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step4" from-label="step4">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step3a" from-label="step3a">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step4a" from-label="step4a">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step5" from-label="step5">
			<map:serialize type="xml"/>
		</map:view>
		<map:view name="step6" from-label="step6">
			<map:serialize type="xml"/>
		</map:view>
	</map:views>
	<!-- -->
</map:sitemap>
